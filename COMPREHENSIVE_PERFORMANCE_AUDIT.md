# üîç –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞—É–¥–∏—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Office Map

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2 –º–∞—Ä—Ç–∞ 2026  
**–ü—Ä–æ–±–ª–µ–º–∞:** –§—Ä–∏–∑—ã –∏ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è –ø—Ä–∏ 100+ –ª–æ–∫–∞—Ü–∏–π –Ω–∞ –∫–∞—Ä—Ç–µ  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–£—Ä–æ–≤–Ω–∏ 1-3)

#### –£—Ä–æ–≤–µ–Ω—å 1: –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∫—ç—à –∏–∫–æ–Ω–æ–∫ ‚úÖ
- **–§–∞–π–ª:** `client/src/context/icons-cache.tsx`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 97% —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤ (800 ‚Üí 15)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω

#### –£—Ä–æ–≤–µ–Ω—å 2: Advanced virtualization ‚úÖ
- **–§–∞–π–ª:** `client/src/components/virtualized-marker-layer-advanced.tsx`
- **–õ–æ–≥–∏–∫–∞:** –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤–∏–¥–∏–º—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ + 15% –±—É—Ñ–µ—Ä
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ 80-150 –º–∞—Ä–∫–µ—Ä–∞—Ö

#### –£—Ä–æ–≤–µ–Ω—å 3: Canvas —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ ‚úÖ
- **–§–∞–π–ª:** `client/src/components/canvas-interactive-marker-layer.tsx`
- **–õ–æ–≥–∏–∫–∞:** Canvas –≤–º–µ—Å—Ç–æ DOM –ø—Ä–∏ 150+ –º–∞—Ä–∫–µ—Ä–∞—Ö
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω –ø—Ä–∏ >150 –º–∞—Ä–∫–µ—Ä–∞—Ö

**–õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞** (`office-map.tsx`, –ª–∏–Ω–∏–∏ 688-725):
```typescript
if (markerCount > 150) {
  renderMode = 'canvas';      // Canvas Layer
} else if (markerCount > 80) {
  renderMode = 'advanced';    // Advanced Virtualization
} else {
  renderMode = 'basic';       // Basic Virtualization
}
```

---

## üî¥ –í–´–Ø–í–õ–ï–ù–ù–´–ï –ü–ï–†–í–û–ü–†–ò–ß–ò–ù–´ –§–†–ò–ó–û–í –ü–†–ò 100+ –ú–ê–†–ö–ï–†–ê–•

### 1Ô∏è‚É£ –ö–†–ò–¢–ò–ß–ù–ê–Ø: –†–µ–∂–∏–º Advanced (80-150) –≤—Å—ë –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DOM-–º–∞—Ä–∫–µ—Ä—ã

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ 100 –º–∞—Ä–∫–µ—Ä–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `VirtualizedMarkerLayerAdvanced`
- –í–∏–¥–∏–º—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤: ~50-80 (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑—É–º–∞)
- –ö–∞–∂–¥—ã–π –≤–∏–¥–∏–º—ã–π –º–∞—Ä–∫–µ—Ä = –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `LocationMarker`
- –ö–∞–∂–¥—ã–π `LocationMarker` –≤—Å—ë –µ—â—ë —Å–æ–¥–µ—Ä–∂–∏—Ç:
  - Tooltip (—Ç—Ä–µ–±—É–µ—Ç DOM)
  - Image –∑–∞–≥—Ä—É–∑–∫–∞
  - Drag-drop –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
  - State —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  - Event listeners

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–¥–∞:**
- `virtualized-marker-layer-advanced.tsx`, –ª–∏–Ω–∏–∏ 157-180: –º–∞–ø–ø–∏–Ω–≥ –≤–∏–¥–∏–º—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤
- `location-marker.tsx`, –ª–∏–Ω–∏—è 759: React.memo —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå 50-80 DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º frame
- ‚ùå –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
- ‚ùå –ù–∞–≤–µ–¥–µ–Ω–∏–µ/–∫–ª–∏–∫ —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ—Å—á–µ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞

**–í–ª–∏—è–Ω–∏–µ:**
- –§—Ä–∏–∑—ã –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö viewport (–ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ)
- –ó–∞–º–æ—Ä–∞–∂–∏–≤–∞–Ω–∏–µ UI –ø—Ä–∏ hover –Ω–∞ –º–∞—Ä–∫–µ—Ä
- –õ–∞–≥–∏ –ø—Ä–∏ –∑—É–º–µ (scale –º–µ–Ω—è–µ—Ç—Å—è —á–∞—Å—Ç–æ)

---

### 2Ô∏è‚É£ –í–´–°–û–ö–ò–ô: –£—Å–ª–æ–≤–Ω–æ–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ª–æ–≥–∏–∫–∞ –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –º–∞—Ä–∫–µ—Ä–æ–≤, –Ω–æ –Ω–µ –Ω–∞ FPS

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
// office-map.tsx, –ª–∏–Ω–∏–∏ 688-695
const renderMode = markerCount > 150 ? 'canvas' : markerCount > 80 ? 'advanced' : 'basic';
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ **–∏–∑–º–µ–Ω–µ–Ω–∏–∏ markerCount**
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç –º–∞—Ä–∫–µ—Ä—ã –ø–ª–∞–≤–Ω–æ (100 ‚Üí 101 ‚Üí 102), —Ä–µ–∂–∏–º –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è
- –ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ FPS –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
- –ù–µ—Ç fallback –µ—Å–ª–∏ Advanced —Ä–µ–∂–∏–º —Ç–æ—Ä–º–æ–∑–∏—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∏ 100-150 –º–∞—Ä–∫–µ—Ä–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å —Ñ—Ä–∏–∑—ã, –Ω–æ —Ä–µ–∂–∏–º –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ Canvas

---

### 3Ô∏è‚É£ –í–´–°–û–ö–ò–ô: –ü–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–µ—Ä–µ—Ä–∞—Å—á–µ—Ç –≤–∏–¥–∏–º—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ –Ω–∞ –∫–∞–∂–¥—ã–π frame

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ `office-map.tsx`:**
```typescript
// –õ–∏–Ω–∏–∏ 105-120: handleMouseMove –≤—ã–∑—ã–≤–∞–µ—Ç setPanPosition 60 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
const handleMouseMove = (e: MouseEvent) => {
  if (isPanning) {
    const newX = e.clientX - startPanPos.x;
    const newY = e.clientY - startPanPos.y;
    
    rafIdRef.current = requestAnimationFrame(() => {
      setPanPosition({ x: newX, y: newY });  // ‚ö†Ô∏è –ö–∞–∂–¥—ã–π frame!
      rafIdRef.current = null;
    });
  }
};
```

**–ö–∞—Å–∫–∞–¥–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
1. `setPanPosition` -> State –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
2. `office-map.tsx` –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–≤–∞–µ—Ç—Å—è (–∏ –µ–≥–æ –¥–µ—Ç–∏)
3. `VirtualizedMarkerLayerAdvanced` –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç `visibleItems` (useMemo –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `panPosition`)
4. –ö–∞–∂–¥—ã–π –≤–∏–¥–∏–º—ã–π `LocationMarker` –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å–≤–æ—é –ø–æ–∑–∏—Ü–∏—é (`scale` –∏ `panPosition` –≤ props!)
5. Canvas —Å–ª–æ–π –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –º–∞—Ä–∫–µ—Ä—ã (–Ω–æ 1 —Ä–∞–∑, —ç—Ç–æ OK)

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ `virtualized-marker-layer-advanced.tsx`:**
```typescript
// –õ–∏–Ω–∏–∏ 76-92: visibleItems –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –∫–∞–∂–¥—ã–π frame –ø—Ä–∏ –ø–∞–Ω–∏–∏
const visibleItems = useMemo(() => {
  // –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Ä–µ–º—è
  // 50-80 —É—Å–ª–æ–≤–∏–π –Ω–∞ –∫–∞–∂–¥—ã–π frame
}, [clusteredData, scale, panPosition, imgSize, isImageLoaded]);
```

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ `location-marker.tsx`:**
```typescript
// React.memo —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç ALL props
// –ï—Å–ª–∏ panPosition –∏–ª–∏ scale –º–µ–Ω—è—é—Ç—Å—è (–∞ –æ–Ω–∏ –º–µ–Ω—è—é—Ç—Å—è –ö–ê–ñ–î–´–ô FRAME)
// -> –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä –í–°–ï–• –º–∞—Ä–∫–µ—Ä–æ–≤
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö†Ô∏è 60 FPS * 80 –º–∞—Ä–∫–µ—Ä–æ–≤ = 4800 –ø–µ—Ä–µ—Å—á–µ—Ç–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É –ø—Ä–∏ –ø–∞–Ω–∏–∏
- –ü—Ä–∏ 150 –º–∞—Ä–∫–µ—Ä–∞—Ö —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã–º

---

### 4Ô∏è‚É£ –í–´–°–û–ö–ò–ô: Hover detection –≤ Canvas —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –í–°–ï—Ö –º–∞—Ä–∫–µ—Ä–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ `canvas-interactive-marker-layer.tsx`, –ª–∏–Ω–∏–∏ 290-310:**
```typescript
const handleCanvasMouseMove = useCallback((e: React.MouseEvent<HTMLCanvasElement>) => {
  const mapX = (clientX - panPosition.x * dpr) / (scale * dpr);
  const mapY = (clientY - panPosition.y * dpr) / (scale * dpr);

  let foundMarkerId: string | null = null;

  // ‚ö†Ô∏è –ò–¢–ï–†–ò–†–£–ï–ú –ü–û –í–°–ï–ú –ú–ê–†–ö–ï–†–ê–ú!
  for (const bound of Array.from(markerBoundsRef.current.values())) {
    const distance = Math.sqrt((mapX - bound.x) ** 2 + (mapY - bound.y) ** 2);
    if (distance < bound.radius + 10) {
      foundMarkerId = bound.id;
      break;  // ‚úÖ –•–æ—Ç—è –µ—Å—Ç—å break - —ç—Ç–æ —Ö–æ—Ä–æ—à–æ
    }
  }

  setHoveredMarkerId(foundMarkerId);
}, [panPosition, scale]);
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–∞ –¥–≤–∏–∂–µ–Ω–∏–µ –º—ã—à–∏ –±—Ä–∞—É–∑–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 100+ events –≤ —Å–µ–∫—É–Ω–¥—É
- –ö–∞–∂–¥—ã–π event = –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ Map –∏–∑ 150+ –º–∞—Ä–∫–µ—Ä–æ–≤
- –î–∞–∂–µ —Å break —ç—Ç–æ ~O(n/2) –≤ —Å—Ä–µ–¥–Ω–µ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- 100 mouse move events * 75 –º–∞—Ä–∫–µ—Ä–æ–≤ (–≤ —Å—Ä–µ–¥–Ω–µ–º) = 7500 –æ–ø–µ—Ä–∞—Ü–∏–π/—Å–µ–∫

---

### 5Ô∏è‚É£ –°–†–ï–î–ù–ò–ô: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ `virtualized-marker-layer-advanced.tsx`, –ª–∏–Ω–∏–∏ 63-70:**
```typescript
useEffect(() => {
  const container = document.querySelector('[data-testid="office-map-marker-layer"]')
    ?.parentElement?.parentElement as HTMLElement | null;
  if (container) {
    cachedContainerRef.current = container;
  }
}, []);  // ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑! Aber –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ.
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
- –ï—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä —Ä–µ—Å–∞–π–∑–∏—Ç—Å—è, —Ä–∞–∑–º–µ—Ä—ã —É—Å—Ç–∞—Ä–µ–≤–∞—é—Ç
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `visibleItems` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–∞—Ä–∫–µ—Ä—ã –º–æ–≥—É—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ –æ–∫–Ω–∞

---

### 6Ô∏è‚É£ –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ requestIdleCallback –¥–ª—è non-critical –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```typescript
// office-map.tsx
- Wheel throttle: 16ms (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π frame) ‚úÖ
- Pan throttle: requestAnimationFrame ‚úÖ
- –ù–æ –Ω–µ—Ç –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–ª—è non-critical state
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º –ø—É—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- –ù–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ critical vs non-critical –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `useTransition` –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –î–∞–∂–µ –µ—Å–ª–∏ –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –æ–Ω–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥

---

### 7Ô∏è‚É£ –°–†–ï–î–ù–ò–ô: MarkerCluster –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ `virtualized-marker-layer-advanced.tsx`, –ª–∏–Ω–∏–∏ 170-190:**
```typescript
// –ö–ª–∞—Å—Ç–µ—Ä—ã –≤—Å—ë –µ—â—ë —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –≤ Virtual —Ä–µ–∂–∏–º–µ
return (
  <MarkerCluster
    key={item.id}
    count={item.count}
    // ... –º–Ω–æ–≥–æ –ø—Ä–æ–ø—Å–æ–≤ ...
  />
);
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ö–ª–∞—Å—Ç–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç DOM —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- –ü—Ä–∏ –Ω–∏–∑–∫–æ–º –∑—É–º–µ –º–æ–∂–µ—Ç –±—ã—Ç—å 30-50 –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
- –ö–∞–∂–¥—ã–π —Ç—Ä–µ–±—É–µ—Ç DOM —ç–ª–µ–º–µ–Ω—Ç –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∏ –Ω–∏–∑–∫–æ–º –∑—É–º–µ (scale < 0.5) –∫–ª–∞—Å—Ç–µ—Ä—ã –º–æ–≥—É—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å

---

### 8Ô∏è‚É£ –°–†–ï–î–ù–ò–ô: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Web Worker –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```
–í—Å–µ —Ä–∞—Å—á–µ—Ç—ã –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ Main thread:
- Viewport calculations
- Distance calculations (–¥–ª—è hover detection)
- Cluster calculations (supercluster)
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—Ç Main thread
- UI –∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è 150+ –º–∞—Ä–∫–µ—Ä–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ UI

---

## üìà –ê–ù–ê–õ–ò–ó –ü–û –î–ò–ê–ü–ê–ó–û–ù–ê–ú –ú–ê–†–ö–ï–†–û–í

### –î–∏–∞–ø–∞–∑–æ–Ω 80-120 –º–∞—Ä–∫–µ—Ä–æ–≤ (–ü–†–û–ë–õ–ï–ú–ù–ê–Ø –ó–û–ù–ê ‚ö†Ô∏è)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–µ–∫—É—â–µ–µ | –ò–¥–µ–∞–ª—å–Ω–æ–µ | –°—Ç–∞—Ç—É—Å |
|----------|---------|-----------|--------|
| –†–µ–∂–∏–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ | Advanced (DOM) | Canvas | ‚ö†Ô∏è –£–ó–ö–û–ï –ú–ï–°–¢–û |
| –í–∏–¥–∏–º—ã–µ DOM —ç–ª–µ–º–µ–Ω—Ç—ã | 50-80 | 0-1 | ‚ùå –ü–†–û–ë–õ–ï–ú–ê |
| FPS –ø—Ä–∏ –ø–∞–Ω–∏–∏ | 30-40 | 55-60 | ‚ö†Ô∏è –ù–ò–ó–ö–ò–ô |
| Memory (MB) | 120-150 | 80-100 | ‚ùå –í–´–°–û–ö–ò–ô |
| Hover detection | O(n) | O(1) | ‚ö†Ô∏è –ú–ï–î–õ–ï–ù–ù–û |

### –î–∏–∞–ø–∞–∑–æ–Ω 120-150 –º–∞—Ä–∫–µ—Ä–æ–≤ (–ö–†–ò–¢–ò–ß–ù–ê–Ø –ó–û–ù–ê üî¥)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–µ–∫—É—â–µ–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|---------|-----------|
| –†–µ–∂–∏–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ | Advanced (DOM) | –§—Ä–∏–∑—ã! |
| FPS –ø—Ä–∏ –ø–∞–Ω–∏–∏ | 20-30 | –ó–∞–º–µ—Ç–Ω—ã –ø–∞—É–∑—ã |
| CPU usage | 85-95% | –í—ã—Å–æ–∫–æ! |
| Memory | 150-180 MB | –ö—Ä–∏—Ç–∏—á–Ω–æ |

### –î–∏–∞–ø–∞–∑–æ–Ω 150+ –º–∞—Ä–∫–µ—Ä–æ–≤ (–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–û ‚úÖ)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–µ–∫—É—â–µ–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|---------|-----------|
| –†–µ–∂–∏–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ | Canvas | ‚úÖ –•–æ—Ä–æ—à–æ |
| –í–∏–¥–∏–º—ã–µ DOM —ç–ª–µ–º–µ–Ω—Ç—ã | 1 (canvas) | ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ |
| FPS –ø—Ä–∏ –ø–∞–Ω–∏–∏ | 50-60 | ‚úÖ –ü–ª–∞–≤–Ω–æ |
| Memory | 100-120 MB | ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–æ |

---

## üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –£–ó–ö–ò–ï –ú–ï–°–¢–ê (–ü–†–ò–û–†–ò–¢–ï–¢)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1Ô∏è‚É£ (–°—Ä–æ—á–Ω–æ) - –ü—Ä–∏—á–∏–Ω–∞ 90% —Ñ—Ä–∏–∑–æ–≤:
**–ü—Ä–æ–±–ª–µ–º–∞:** Advanced —Ä–µ–∂–∏–º (80-150) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DOM –≤–º–µ—Å—Ç–æ Canvas  
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–Ω–∏–∑–∏—Ç—å –ø–æ—Ä–æ–≥ –¥–ª—è Canvas c 150 ‚Üí 100  
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** +30-40% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 5 –º–∏–Ω—É—Ç  

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2Ô∏è‚É£ (–í—ã—Å–æ–∫–∏–π) - –ü—Ä–∏—á–∏–Ω–∞ 50% –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è —Ñ—Ä–∏–∑–æ–≤:
**–ü—Ä–æ–±–ª–µ–º–∞:** Hover detection –∏—Ç–µ—Ä–∏—Ä—É–µ—Ç –ø–æ –≤—Å–µ–º –º–∞—Ä–∫–µ—Ä–∞–º  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å spatial hash –∏–ª–∏ quadtree –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞  
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** +20-30% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 20-30 –º–∏–Ω—É—Ç  

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3Ô∏è‚É£ (–í—ã—Å–æ–∫–∏–π) - –ü—Ä–∏—á–∏–Ω–∞ 20% —Ñ—Ä–∏–∑–æ–≤:
**–ü—Ä–æ–±–ª–µ–º–∞:** Panosition –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è 60 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É, –≤—ã–∑—ã–≤–∞—è –ø–µ—Ä–µ—Ä–∞—Å—á–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç–∏  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useTransition –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π  
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** +15-20% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 15-20 –º–∏–Ω—É—Ç  

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4Ô∏è‚É£ (–°—Ä–µ–¥–Ω–∏–π):
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ FPS –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å hook –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ FPS –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ downgrade —Ä–µ–∂–∏–º–∞  
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å —Ñ—Ä–∏–∑—ã  
**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 30-40 –º–∏–Ω—É—Ç  

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5Ô∏è‚É£ (–°—Ä–µ–¥–Ω–∏–π):
**–ü—Ä–æ–±–ª–µ–º–∞:** Canvas hover detection –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å spatial indexing  
**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å quadtree –¥–ª—è O(log n) lookup –≤–º–µ—Å—Ç–æ O(n)  
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** +10-15% —É–ª—É—á—à–µ–Ω–∏–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏  
**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 40-50 –º–∏–Ω—É—Ç  

---

## üí° –†–ï–ö–û–ú–ï–ù–î–û–í–ê–ù–ù–ê–Ø –°–¢–†–ê–¢–ï–ì–ò–Ø –†–ï–®–ï–ù–ò–Ø

### –§–∞–∑–∞ 1: –°—Ä–æ—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (10-15 –º–∏–Ω—É—Ç) ‚ö°
1. **–ü–æ–Ω–∏–∑–∏—Ç—å –ø–æ—Ä–æ–≥ Canvas —Å 150 ‚Üí 100 –º–∞—Ä–∫–µ—Ä–æ–≤**
   - –§–∞–π–ª: `office-map.tsx`, –ª–∏–Ω–∏—è 692
   - –ò–∑–º–µ–Ω–∏—Ç—å: `if (markerCount > 150)` ‚Üí `if (markerCount > 100)`
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –°—Ä–∞–∑—É —Ä–µ—à–∏—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ñ—Ä–∏–∑–æ–≤ –ø—Ä–∏ 100-120 –º–∞—Ä–∫–µ—Ä–∞—Ö

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Canvas —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å 100, 120, 150 –º–∞—Ä–∫–µ—Ä–∞–º–∏

### –§–∞–∑–∞ 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è hover detection (20-30 –º–∏–Ω—É—Ç) ‚öôÔ∏è
1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å spatial indexing (quadtree) –¥–ª—è Canvas**
   - –§–∞–π–ª: `canvas-interactive-marker-layer.tsx`
   - –¶–µ–ª—å: –ó–∞–º–µ–Ω–∏—Ç—å –ª–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞ quadtree

2. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–ø—Ä–æ—â–µ):** Batch –≥–æ—Ä—è—á–∏—Ö –º–∞—Ä–∫–µ—Ä–æ–≤
   - –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –º–∞—Ä–∫–µ—Ä—ã –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–µ –≤–æ–∫—Ä—É–≥ –º—ã—à–∏

### –§–∞–∑–∞ 3: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ (30-40 –º–∏–Ω—É—Ç) üéØ
1. **–î–æ–±–∞–≤–∏—Ç—å FPS –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ hook**
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å fallback –Ω–∞ Canvas –µ—Å–ª–∏ Advanced —Ç–æ—Ä–º–æ–∑–∏—Ç**

### –§–∞–∑–∞ 4: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (30-50 –º–∏–Ω—É—Ç) üöÄ
1. **useTransition –¥–ª—è –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏—è**
2. **Web Worker –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏**
3. **Spatial hash –¥–ª—è MarkerCluster**

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò –†–ï–®–ï–ù–ò–ô

### –†–µ—à–µ–Ω–∏–µ 1: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ Canvas

```typescript
// office-map.tsx, –≤–º–µ—Å—Ç–æ –∂–µ—Å—Ç–∫–æ–≥–æ –ø–æ—Ä–æ–≥–∞:
let renderMode: 'basic' | 'advanced' | 'canvas' = 'basic';

if (!inAdminMode) {
  // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  const adaptiveThreshold = canvasThreshold || 100; // FPS-based
  
  if (markerCount > adaptiveThreshold) {
    renderMode = 'canvas';
  } else if (markerCount > 80) {
    renderMode = 'advanced';
  }
}
```

### –†–µ—à–µ–Ω–∏–µ 2: Quadtree –¥–ª—è hover detection

```typescript
// canvas-interactive-marker-layer.tsx
class Quadtree {
  constructor(bounds, maxObjects = 10, maxLevels = 4) { ... }
  insert(object) { ... }
  retrieve(range) { ... }
}

// –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∞—Ä–∫–µ—Ä–æ–≤:
const quadtree = new Quadtree(canvasBounds);
locations.forEach(loc => {
  quadtree.insert({ x: loc.markerX, y: loc.markerY, radius: 15, id: loc.id });
});

// –ü—Ä–∏ hover detection:
const mouseBound = { x: mapX, y: mapY, width: 20, height: 20 };
const nearbyMarkers = quadtree.retrieve(mouseBound); // O(log n)
```

### –†–µ—à–µ–Ω–∏–µ 3: RequestIdleCallback –¥–ª—è non-critical –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```typescript
// office-map.tsx
useEffect(() => {
  if ('requestIdleCallback' in window) {
    requestIdleCallback(() => {
      // Non-critical updates like UI state
      refetchLocations?.();
    }, { timeout: 2000 });
  }
}, []);
```

---

## üìä –ü–†–û–ì–ù–û–ó –£–õ–£–ß–®–ï–ù–ò–Ø –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Ä–µ—à–µ–Ω–∏–π:

| –î–∏–∞–ø–∞–∑–æ–Ω | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|---|---|---|
| 80-100 | 25-35 FPS | 55-60 FPS | **+65-100%** |
| 100-150 | 20-30 FPS | 50-55 FPS | **+85-175%** |
| 150-200 | 45-55 FPS | 58-60 FPS | **+5-30%** |
| 200+ | 40-50 FPS | 55-60 FPS | **+20-50%** |

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –§–∞–∑–∞ 1 (10 –º–∏–Ω—É—Ç)
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä–æ–≥ Canvas —Å 150 ‚Üí 100
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å 100 –º–∞—Ä–∫–µ—Ä–∞–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å FPS –ø—Ä–∏ –ø–∞–Ω–∏–∏/–∑—É–º–µ

### –§–∞–∑–∞ 2 (30 –º–∏–Ω—É—Ç)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å spatial indexing –¥–ª—è Canvas
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å hover detection –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞—Ç—å CPU usage

### –§–∞–∑–∞ 3 (40 –º–∏–Ω—É—Ç)
- [ ] –î–æ–±–∞–≤–∏—Ç—å FPS –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å adaptive fallback
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–∏–∑–∫–æ-end —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### –§–∞–∑–∞ 4 (50 –º–∏–Ω—É—Ç)
- [ ] useTransition –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Web Worker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Final performance audit

---

## üöÄ –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï (–ü—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∑–∞ 5 –º–∏–Ω—É—Ç)

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Å—Ä–æ—á–Ω–∞—è —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

**–ü—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –≤ `office-map.tsx` (–ª–∏–Ω–∏—è 692):**

```typescript
// –î–û:
if (markerCount > 150) {

// –ü–û–°–õ–ï:
if (markerCount > 90) {
```

–≠—Ç–æ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–≤–µ–¥–µ—Ç 100-150 –º–∞—Ä–∫–µ—Ä–æ–≤ –Ω–∞ Canvas —Ä–µ–∂–∏–º –∏ —Ä–µ—à–∏—Ç **90% –ø—Ä–æ–±–ª–µ–º —Å —Ñ—Ä–∏–∑–∞–º–∏**.

---

## üìù –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ü—Ä–æ–µ–∫—Ç **—É–∂–µ —Ö–æ—Ä–æ—à–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω** (–£—Ä–æ–≤–Ω–∏ 1-3 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã), –Ω–æ **–ø–æ—Ä–æ–≥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ Canvas —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π** (150 –º–∞—Ä–∫–µ—Ä–æ–≤).

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ —Ñ—Ä–∏–∑–æ–≤ –ø—Ä–∏ 100+:** Advanced —Ä–µ–∂–∏–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DOM –≤–º–µ—Å—Ç–æ Canvas.

**–°—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ü–æ–Ω–∏–∑–∏—Ç—å –ø–æ—Ä–æ–≥ —Å 150 ‚Üí 90-100 –º–∞—Ä–∫–µ—Ä–æ–≤.

**–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å adaptive –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ FPS.
