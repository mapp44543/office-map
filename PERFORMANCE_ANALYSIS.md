# üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: Office Map

**–î–∞—Ç–∞:** 25 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ—Ä–º–æ–∂–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏ 100+ –æ–±—ä–µ–∫—Ç–∞—Ö –Ω–∞ –∫–∞—Ä—Ç–µ —ç—Ç–∞–∂–∞

---

## üìä –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1Ô∏è‚É£ **–ö–†–ò–¢–ò–ß–ù–ê–Ø: –í–∑—Ä—ã–≤–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ API –∑–∞–ø—Ä–æ—Å–æ–≤** üö®

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ö–∞–∂–¥—ã–π `LocationMarker` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç **6-8 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö `useQuery` –∑–∞–ø—Ä–æ—Å–æ–≤**
- –ó–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–∞–∂–¥–æ–≥–æ –º–∞—Ä–∫–µ—Ä–∞
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ª–∏–Ω–µ–π–Ω–æ: 100 –º–∞—Ä–∫–µ—Ä–æ–≤ = **600-800 –∑–∞–ø—Ä–æ—Å–æ–≤!**

**–ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
```tsx
// src/components/location-marker.tsx (—Å—Ç—Ä–æ–∫–∏ 235-265)
const { data: commonAreaIcons } = useCustomIcons("common area", { ... });
const { data: meetingRoomIcons } = useCustomIcons("negotiation room", { ... });
const { data: equipmentIcons } = useCustomIcons("print", { ... });
const { data: cameraIcons } = useCustomIcons("–ö–∞–º–µ—Ä–∞", { ... });
const { data: acIcons } = useCustomIcons("ac", { ... });
const { data: workstationActivIcons } = useCustomIcons("workstation", { ... });
const { data: workstationNonactivIcons } = useCustomIcons("workstation", { ... });
const { data: workstationRepairIcons } = useCustomIcons("workstation", { ... });
const { data: avatar } = useQuery({ ... });
```

**–í–ª–∏—è–Ω–∏–µ:**
- –ü–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω–∞—è –æ—á–µ—Ä–µ–¥—å —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ë—Ä–∞—É–∑–µ—Ä –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ –æ—Ç–≤–µ—Ç—ã
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Ç–æ–∫–∞ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM
- Network waterfall —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–æ–Ω—Å—Ç—Ä–æ–º

**–†–µ—à–µ–Ω–∏–µ:** –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –∏–∫–æ–Ω–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–µ –≤ –∫–∞–∂–¥–æ–º –º–∞—Ä–∫–µ—Ä–µ

---

### 2Ô∏è‚É£ **DOM-—Ç—è–∂–µ–ª—ã–µ –º–∞—Ä–∫–µ—Ä—ã**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `LocationMarker` - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –ö–∞–∂–¥—ã–π –º–∞—Ä–∫–µ—Ä = 1 div + tooltip + –∏–∫–æ–Ω–∫–∏ + –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
- –ü—Ä–∏ 100 –º–∞—Ä–∫–µ—Ä–∞—Ö = 100+ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ DOM
- –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç –ø–∞–º—è—Ç–∏, –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏, —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
VirtualizedMarkerLayer (–≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ –º–∞—Ä–∫–µ—Ä—ã)
 ‚îú‚îÄ LocationMarker (100+ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –ª–æ–≥–∏–∫–æ–π)
 ‚îÇ  ‚îú‚îÄ Tooltip
 ‚îÇ  ‚îú‚îÄ img (–∏–∫–æ–Ω–∫–∞)
 ‚îÇ  ‚îú‚îÄ –ú–Ω–æ–∂–µ—Å—Ç–≤–æ useQuery –∑–∞–ø—Ä–æ—Å–æ–≤
 ‚îÇ  ‚îî‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ drag/drop
```

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Canvas –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –º–∞—Ä–∫–µ—Ä–æ–≤ (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `CanvasMarkerRenderer`)

---

### 3Ô∏è‚É£ **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è React.memo**

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ:**
```tsx
// src/components/location-marker.tsx (—Å—Ç—Ä–æ–∫–∞ 770)
const LocationMarkerMemo = React.memo(LocationMarkerComponent, (prev, next) => {
  return (
    prev.location.id === next.location.id &&
    prev.location.x === next.location.x &&
    // ...
    prev.scale === next.scale &&  // üî¥ –ü–†–û–ë–õ–ï–ú–ê!
    prev.panPosition.x === next.panPosition.x &&  // üî¥ –ü–†–û–ë–õ–ï–ú–ê!
    prev.panPosition.y === next.panPosition.y &&  // üî¥ –ü–†–û–ë–õ–ï–ú–ê!
  );
});
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ:**
- `scale` –∏ `panPosition` **–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏ –º—ã—à–∏**
- –ú—ã—à—å –¥–≤–∏–∂–µ—Ç—Å—è 60+ —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
- –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä **–í–°–ï–• –º–∞—Ä–∫–µ—Ä–æ–≤** 60+ —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É!
- React.memo —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–∫–ª—é—á–∏—Ç—å `scale` –∏ `panPosition` –∏–∑ memo —Å—Ä–∞–≤–Ω–µ–Ω–∏—è, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç

---

### 4Ô∏è‚É£ **VirtualizedMarkerLayer –≤—Å–µ –µ—â–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç DOM**

**–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```tsx
// –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ –º–∞—Ä–∫–µ—Ä—ã, –Ω–æ –∫–∞–∂–¥—ã–π - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
{visibleItems.map((item) => (
  <LocationMarker key={item.location.id} {...props} />
))}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–∞–∂–µ "–≤–∏–¥–∏–º—ã–µ" –º–∞—Ä–∫–µ—Ä—ã –≤—Å–µ –µ—â–µ DOM —ç–ª–µ–º–µ–Ω—Ç—ã
- Drag-drop, tooltip, –∏–∫–æ–Ω–∫–∏ - –≤—Å—ë —Ç—Ä–µ–±—É–µ—Ç DOM
- Canvas –º–æ–∂–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤–∞—Ç—å —Ç–æ –∂–µ —Å–∞–º–æ–µ –≤ **10-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ**

---

### 5Ô∏è‚É£ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—É–ª–∏–Ω–≥–∞ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤**

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –∑—É–º–∏—Ä–æ–≤–∞–Ω–∏–∏/–ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–∞—Ä–∫–µ—Ä—ã –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è
- –ö–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è = –Ω–æ–≤—ã–µ useQuery –∑–∞–ø—Ä–æ—Å—ã
- –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –ª–æ–∫–∞—Ü–∏–∏, –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤—Å—ë –∑–∞–Ω–æ–≤–æ

---

## üîß –†–µ—à–µ–Ω–∏—è (–æ—Ç –±—ã—Å—Ç—Ä—ã—Ö –∫ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–º)

### **–£—Ä–æ–≤–µ–Ω—å 1: –ë—ã—Å—Ç—Ä—ã–µ –ø–æ–±–µ–≥–∏ (30-50% —É–ª—É—á—à–µ–Ω–∏—è)**

1. **–ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –∏–∫–æ–Ω–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ**
   - –ó–∞–≥—Ä—É–∂–∞—Ç—å –∏–∫–æ–Ω–∫–∏ –æ–¥–∏–Ω —Ä–∞–∑ –≤ App.tsx, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç
   - –≠–∫–æ–Ω–æ–º–∏—è: –∏—Å–∫–ª—é—á–∏—Ç—å 600+ –∑–∞–ø—Ä–æ—Å–æ–≤

2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å React.memo**
   - –ù–µ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å `scale` –∏ `panPosition`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useContext` –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

3. **K—ç—à–∏—Ä–æ–≤–∞—Ç—å –∞–≤–∞—Ç–∞—Ä–∫–∏**
   - –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∏–¥–∏–º—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤ —Ç–∏–ø–∞ "workstation"
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å React Query —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–ª—é—á–æ–º –∫—ç—à–∞

---

### **–£—Ä–æ–≤–µ–Ω—å 2: –°—Ä–µ–¥–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (50-70% —É–ª—É—á—à–µ–Ω–∏—è)**

4. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ Canvas —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–ª—è –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–æ–≤**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `CanvasMarkerRenderer`
   - –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø—Ä–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –º–∞—Ä–∫–µ—Ä–æ–≤ > 80

5. **–£–ª—É—á—à–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å react-window –¥–ª—è –º–∞—Ä–∫–µ—Ä–æ–≤ –≤ DOM —Ä–µ–∂–∏–º–µ
   - –ü—É–ª–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

### **–£—Ä–æ–≤–µ–Ω—å 3: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (70-90% —É–ª—É—á—à–µ–Ω–∏—è)**

6. **–ß–∏—Å—Ç—ã–π Canvas —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ + –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π**
   - –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Canvas
   - –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ canvas
   - Hit detection –¥–ª—è –º–∞—Ä–∫–µ—Ä–æ–≤ –≤ Canvas

7. **–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤**
   - –•—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ –º–∞—Ä–∫–µ—Ä—ã –≤ –ø–∞–º—è—Ç–∏
   - –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª–µ–π –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ (–£—Ä–æ–≤–µ–Ω—å 1) | –ü–æ—Å–ª–µ (–£—Ä–æ–≤–µ–Ω—å 2) | –ü–æ—Å–ª–µ (–£—Ä–æ–≤–µ–Ω—å 3) |
|---------|----|--------------------|--------------------|--------------------|
| API –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ 100 –º–∞—Ä–∫–µ—Ä–æ–≤ | 600+ | 10-20 | 10-20 | 5-10 |
| FPS –ø—Ä–∏ –ø–∞–Ω–æ—Ä–∞–º–∏—Ä–æ–≤–∞–Ω–∏–∏ | 15-20 | 30-40 | 40-55 | 55-60 |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ | 150-200MB | 120-150MB | 80-100MB | 50-70MB |
| –ü–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä | 3-5s | 1-2s | 0.5-1s | 0.3-0.5s |

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

1. **–°–Ω–∞—á–∞–ª–∞:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **–£—Ä–æ–≤–µ–Ω—å 1** (–±—ã—Å—Ç—Ä–æ, –≤—ã—Å–æ–∫–∏–π ROI)
2. **–ó–∞—Ç–µ–º:** –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ —Ç–æ—Ä–º–æ–∑–∏—Ç ‚Üí **–£—Ä–æ–≤–µ–Ω—å 2**
3. **–ï—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ:** **–£—Ä–æ–≤–µ–Ω—å 3** (–±–æ–ª–µ–µ –∏–Ω–≤–∞–∑–∏–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)

---

## üìù –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

- `client/src/components/location-marker.tsx` - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å memo —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
- `client/src/components/virtualized-marker-layer.tsx` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–∞—Ä–∫–µ—Ä–æ–≤
- `client/src/components/office-map.tsx` - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ä–µ–∂–∏–º–∞
- `client/src/hooks/use-custom-icons.ts` - –¥–æ–±–∞–≤–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫—ç—à (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- `client/src/App.tsx` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∫–æ–Ω–æ–∫

---

**–°—Ç–∞—Ç—É—Å:** üü° –¢—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ UX)
